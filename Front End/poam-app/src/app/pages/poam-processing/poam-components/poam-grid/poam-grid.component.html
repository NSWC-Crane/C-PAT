<!--
!#######################################################################
! C-PATTM SOFTWARE
! CRANE C-PATTM plan of action and milestones software. Use is governed by the Open Source Academic Research License Agreement contained in the file
! crane_C_PAT.1_license.txt, which is part of this software package. BY
! USING OR MODIFYING THIS SOFTWARE, YOU ARE AGREEING TO THE TERMS AND
! CONDITIONS OF THE LICENSE.
!########################################################################
-->

<nb-card class="filtered-poam-grid">
  <nb-card-header>Filtered POAMs</nb-card-header>
  <nb-card-body>
    <div class="row">
      <div class="col">
        <input nbInput [nbFilterInput]="dataSource" id="search" class="search-input" placeholder="Search...">
        <div class="table-container" (scroll)="onScroll($event)">
          <table class="poam-table" [nbTreeGrid]="dataSource">
            <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef="allColumns"></tr>
            <tr nbTreeGridRow *nbTreeGridRowDef="let row; columns: allColumns"></tr>
            <ng-container [nbTreeGridColumnDef]="'POAM ID'">
              <th nbTreeGridHeaderCell *nbTreeGridHeaderCellDef [style.width.%]="10">POAM ID</th>
              <td nbTreeGridCell *nbTreeGridCellDef="let row" [style.width.%]="10">{{row.data.poamId}}</td>
            </ng-container>
            <ng-container [nbTreeGridColumnDef]="'POAM Status'">
              <th nbTreeGridHeaderCell *nbTreeGridHeaderCellDef [style.width.%]="20">POAM Status</th>
              <td nbTreeGridCell *nbTreeGridCellDef="let row" [style.width.%]="20">{{row.data.status}}</td>
            </ng-container>
            <ng-container [nbTreeGridColumnDef]="'Adjusted Severity'">
              <th nbTreeGridHeaderCell *nbTreeGridHeaderCellDef [style.width.%]="20">Adjusted Severity</th>
              <td nbTreeGridCell *nbTreeGridCellDef="let row" [style.width.%]="20">{{row.data.adjSeverity}}</td>
            </ng-container>
            <ng-container [nbTreeGridColumnDef]="'Submitter'">
              <th nbTreeGridHeaderCell *nbTreeGridHeaderCellDef [style.width.%]="20">Submitted By</th>
              <td nbTreeGridCell *nbTreeGridCellDef="let row" [style.width.%]="20">{{row.data.submitter}}</td>
            </ng-container>
            <ng-container [nbTreeGridColumnDef]="'Submitted Date'">
              <th nbTreeGridHeaderCell *nbTreeGridHeaderCellDef [style.width.%]="20">Submitted Date</th>
              <td nbTreeGridCell *nbTreeGridCellDef="let row" [style.width.%]="20">{{row.data.submittedDate}}</td>
            </ng-container>
            <ng-container [nbTreeGridColumnDef]="'Scheduled Completion Date'">
              <th nbTreeGridHeaderCell *nbTreeGridHeaderCellDef [style.width.%]="20">Scheduled Completion Date</th>
              <td nbTreeGridCell *nbTreeGridCellDef="let row" [style.width.%]="20">{{row.data.scheduledCompletionDate}}</td>
            </ng-container>
            <ng-container [nbTreeGridColumnDef]="'Manage'">
              <th nbTreeGridHeaderCell *nbTreeGridHeaderCellDef [style.width.%]="10">Manage</th>
              <td nbTreeGridCell *nbTreeGridCellDef="let row" [style.width.%]="10">
                <button class="manage-POAM-button" nbButton ghost (click)="managePoam(row)">
                  <nb-icon icon="plus-square-outline"></nb-icon>
                </button>
              </td>
            </ng-container>
          </table>
        </div>
      </div>
    </div>
  </nb-card-body>
</nb-card>
