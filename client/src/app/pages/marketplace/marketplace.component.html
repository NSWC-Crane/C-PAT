<!--
!##########################################################################
! CRANE PLAN OF ACTION AND MILESTONE AUTOMATION TOOL (C-PAT) SOFTWARE
! Use is governed by the Open Source Academic Research License Agreement
! contained in the LICENSE.MD file, which is part of this software package.
! BY USING OR MODIFYING THIS SOFTWARE, YOU ARE AGREEING TO THE TERMS AND
! CONDITIONS OF THE LICENSE.
!##########################################################################
-->

<div class="grid grid-cols-12 gap-4">
  <div class="col-span-12">
    <p-card class="pointsBalance">
      <ng-template pTemplate="header">
        User Points Balance: <p-chip [label]="userPoints + ' Points'" styleClass="mr-2"></p-chip>
      </ng-template>
    </p-card>
  </div>

  <div class="col-span-12">
    <p-card header="Themes Store" styleClass="mb-0 pb-0">
      <p-divider type="solid" styleClass="mt-0 pt-0" />
      <p></p>
      <div class="p-grid">
        <div class="theme-card" *ngFor="let theme of themes">
          <p-card [header]="theme.themeName">
            <ng-template pTemplate="header">
              <p-image
                [src]="themeImageUrls[theme.themeId]"
                [alt]="theme.themeName"
                [preview]="true"
                appendTo="body"
              />
            </ng-template>
            <p>{{ theme.themeDescription }}</p>
            <p-chip [label]="theme.cost + ' Points'" styleClass="p-mr-2"></p-chip>
            <ng-template pTemplate="footer">
              <button
                pButton
                pRipple
                type="button"
                label="Purchase"
                class="p-button-outlined"
                (click)="purchaseTheme(theme)"
              ></button>
            </ng-template>
          </p-card>
        </div>
      </div>
    </p-card>
  </div>

  <div class="col-span-12" *ngIf="purchasedThemes.length > 0">
    <p-card header="Purchased Themes" styleClass="mb-0 pb-0">
      <p-divider type="solid" styleClass="mt-0 pt-0" />
      <p></p>
      <div class="p-grid">
        <div class="theme-card" *ngFor="let theme of purchasedThemes">
          <p-card [header]="theme.themeName">
            <ng-template pTemplate="header">
              <p-image
                [src]="themeImageUrls[theme.themeId]"
                [alt]="theme.themeName"
                [preview]="true"
                appendTo="body"
              />
            </ng-template>
            <p>{{ theme.themeDescription }}</p>
            <ng-template pTemplate="footer">
              <button
                pButton
                pRipple
                type="button"
                label="Enable Theme"
                class="p-button-outlined"
                (click)="setTheme(theme.themeIdentifier)"
              ></button>
            </ng-template>
          </p-card>
        </div>
      </div>
    </p-card>
  </div>
</div>

<p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog>
<p-toast></p-toast>
